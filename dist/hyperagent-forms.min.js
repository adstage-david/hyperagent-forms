(function(){var t,r;(function(){"use strict";var e={},o={};t=function(t,r,o){e[t]={deps:r,callback:o}},r=function(t){if(o[t])return o[t];o[t]={};for(var s,a=e[t],n=a.deps,i=a.callback,h=[],c=0,p=n.length;p>c;c++)"exports"===n[c]?h.push(s={}):h.push(r(n[c]));var u=i.apply(this,h);return o[t]=s||u}})(),t("hyperagent-forms/delayed",["exports"],function(t){"use strict";function r(t,r,e){this.xhr=t,this._options=r,this._data=e,!this._data&&t&&t.responseText&&(this._data=t.responseText)}r.prototype.loadResource=function(){var t=new Hyperagent.Resource(this._options);return t._load(this._data),t},t.DelayedResource=r}),t("hyperagent-forms/form",["hyperagent-forms/delayed","exports"],function(t,r){"use strict";function e(t,r,e){this.schema=t.schema,this.method=t.method,this.href=t.href,this._options=r||{},this.errors={},this.data=e}var o=t.DelayedResource;e.prototype._navigateUrl=function(t){this._options.url=Hyperagent.Resource.resolveUrl(this._options.url,t)},e.prototype.validate=function(){if(!this.schema)throw Error("Trying to validate a form without schema.");var t=window.tv4.validateMultiple(this.data,this.schema);return this.errors=t.errors,t.valid},e.prototype.submit=function(){var t=Hyperagent._config.defer(),r={url:this._options.url||this.href,type:this.method||"get",dataType:"text",contentType:"application/json; charset=utf-8",success:this._resolveFactory(t),error:this._rejectFactory(t)};return this.data&&(r.data=JSON.stringify(this.data)),Hyperagent._config.ajax(r),t.promise},e.prototype._resolveFactory=function(t){return function(r,e,s){var a;try{a=JSON.parse(r)}catch(n){}var i=new o(s,this._options,a);t.resolve(i)}.bind(this)},e.prototype._rejectFactory=function(t){return function(r){var e=new o(r,this._options);t.reject(e)}.bind(this)},e.factory=function(t,r){function o(s){if(!(this instanceof o))throw Error("FormFactory should be created with `new`.");var a=new e(t,r,s);return t.href&&a._navigateUrl(t.href),a}return o.schema=t.schema,o},r.Form=e}),t("hyperagent-forms/hook",["hyperagent-forms/form","exports"],function(t,r){"use strict";function e(t){var r=t._forms;this.forms=r?new Hyperagent.LazyResource(this,r,{factory:o.factory}):{}}var o=t.Form;r.LoadHook=e}),t("hyperagentForms",["hyperagent-forms/hook","hyperagent-forms/form","exports"],function(t,r,e){"use strict";var o=t.LoadHook,s=r.Form;e.LoadHook=o,e.Form=s}),window.HyperagentForms=r("hyperagentForms")})();